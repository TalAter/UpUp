<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Getting Started with Offline First using UpUp Tutorial</title>
  <meta name="description" content="A quick tutorial on building Offline First sites, and making your existing sites offline-ready." />
  <meta property="og:image" content="https://www.talater.com/upup/img/upup_logo.jpg"/>
  <meta property="og:title" content="UpUp - Offline First in 1 line of Javascript"/>
  <meta property="og:description" content="Let your users experience your site, even when they're on a plane over the Atlantic, or 20,000 leagues under the sea. #OfflineFirst"/>
  <meta property="og:url" content="https://www.talater.com/upup/"/>
  <meta property="og:site_name" content="UpUp"/>
  <meta property="fb:admins" content="568390229" />
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/online.css">
  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,300italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/github.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>
    $(window).on("scroll resize", function(){
      var postop = $('#phone-demo').offset().top;
      if (postop > $('#step-4').offset().top) {
        $(".phone-contents").attr("src", $('#step-4').data('phoneImage'));
      } else if (postop > $('#step-3').offset().top) {
        $(".phone-contents").attr("src", $('#step-3').data('phoneImage'));
      } else if (postop > $('#step-2').offset().top) {
        $(".phone-contents").attr("src", $('#step-2').data('phoneImage'));
      } else if (postop > $('#step-1').offset().top-50) {
        $(".phone-contents").attr("src", $('#step-1').data('phoneImage'));
      } else if (postop > $('#step-0').offset().top) {
        $(".phone-contents").attr("src", $('#step-0').data('phoneImage'));
      } else {
        $(".phone-contents").attr("src", 'img/phone-dark.png');
      }
    });
  </script>
</head>
<body>
  <header class="shortHeader">
    <h2 class="center-block">Getting Started with Offline First using</h2>
    <img class="img-responsive center-block" src="img/logo.png" alt="upup">
  </header>
  <div class="container">
    <div class="row high">
      <div class="col-md-9">
        <h3>It's time to start thinking offline first</h3>
        <p>Mobile First has become the de-facto standard for building modern sites. But in a world where everyone is mobile, an always-on connection isn't something we can rely on. It's time to start thinking Offline First.</p>
        <p>This tutorial will show you how to add offline functionality to your site in under 10 minutes. When you're done, your visitors will no longer be greeted with an error screen when they visit your site with no connection... Instead you'll be able to control the content and experience they get.</p>
        <h3 id="step-0" data-phone-image="img/phone-lonely-online.png">Let's get started</h3>
        <p>We'll start with a simple site, and add the offline features to it:</p>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Lonely Globe Advisor<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Top Hotels in Rome<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>Villa Domus - Via Piacenza 9, Rome, Italy<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>Hotel Trivelli - Piazza Barberini 11, Rome, Italy<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">ol</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>
        <p id="step-1" data-phone-image="img/phone-lonely-offline.png">Our sample site, Lonely Globe Advisor, offers visitors a list of the top hotels in Rome, with user ratings and an address.</p>
        <p>But what happens if our user just landed in Rome and doesn't have a local data plan?</p>
        <p>Well, he'll be out of luck.</p>
        <h3>Adding Basic Offline Content</h3>
        <p>We can control the experience our users get when they are offline with 2 simple steps:</p>
        <ol>
          <li>Include the UpUp script in our page.</li>
          <li>Define the content we'd like the user to see when he is offline.</li>
        </ol>
<pre id="step-2" data-phone-image="img/phone-lonely-upup-1.png"><code class="html hljs xml"><span class="comment">&lt;html&gt;</span>
<span class="comment">&lt;head&gt;</span>
  <span class="comment">&lt;meta charset="UTF-8"&gt;</span>
  <span class="comment">&lt;title&gt;Lonely Globe Advisor&lt;/title&gt;</span>
<span class="comment">&lt;/head&gt;</span>
<span class="comment">&lt;body&gt;</span>
  <span class="comment">&lt;h1&gt;Top Hotels in Rome&lt;/h1&gt;</span>
  <span class="comment">&lt;ol&gt;</span>
    <span class="comment">&lt;li&gt;Villa Domus - Via Piacenza 9, Rome, Italy&lt;/li&gt;</span>
    <span class="comment">&lt;li&gt;Hotel Trivelli - Piazza Barberini 11, Rome, Italy&lt;/li&gt;</span>
  <span class="comment">&lt;/<span class="comment">ol</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/upup.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="xml">
    UpUp.start({
      'content': '<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Top Hotels in Rome<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Villa Domus<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Hotel Trivelli<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>'
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="comment">&lt;/body&gt;</span>
<span class="comment">&lt;/html&gt;</span></code></pre>
        <p>In the code above we simply told UpUp to display some simple HTML the next time a user can't access our site.</p>
        <p>With just this tiny bit of code, we've added an offline experience for our site, and allowed our users to see the best hotels in Rome&hellip; even when they can't access the web.</p>
        <div class="callout callout-1">
          <h4>How Does It Work?</h4>
          <p>UpUp uses ServiceWorkers to determine when network requests fail. A ServiceWorker is a special script that runs in the browser in the background, and can see the status of network requests.</p>
          <p>When the user first visits your site, UpUp registers a ServiceWorker with your browser, and gives it a list of files to cache for later.</p>
          <p>The next time the user visits your site, the ServiceWorker listens for network errors. If a network request fails, and the ServiceWorker finds that file in the cache, it will return that file, as if it came from the network.</p>
        </div>
        <h3>Creating a rich offline experience</h3>
        <p>While this is already quite impressive, it still doesn't look anything like our online version. Let's improve the offline version with more content, design and images.</p>
        <p>We'll begin by moving our offline content to a separate file. This will make it much easier to update and maintain, and we'll no longer have to include the entire content of the offline site on every page.</p>
<pre><code class="html hljs xml"><span class="comment">&lt;html&gt;</span>
<span class="comment">&lt;head&gt;</span>
  <span class="comment">&lt;meta charset="UTF-8"&gt;</span>
  <span class="comment">&lt;title&gt;Lonely Globe Advisor&lt;/title&gt;</span>
<span class="comment">&lt;/head&gt;</span>
<span class="comment">&lt;body&gt;</span>
  <span class="comment">&lt;h1&gt;Top Hotels in Rome&lt;/h1&gt;</span>
  <span class="comment">&lt;ol&gt;</span>
    <span class="comment">&lt;li&gt;Villa Domus - Via Piacenza 9, Rome, Italy&lt;/li&gt;</span>
    <span class="comment">&lt;li&gt;Hotel Trivelli - Piazza Barberini 11, Rome, Italy&lt;/li&gt;</span>
  <span class="comment">&lt;/<span class="comment">ol</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/upup.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="bash">
    UpUp.start({
      <span class="hljs-string">'content-url'</span>: <span class="hljs-string">'offline.html'</span>
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="comment">&lt;/body&gt;</span>
<span class="comment">&lt;/html&gt;</span></code></pre>
        <p>Now the content our users see when they are offline, is the contents of <code>offline.html</code>. This is just a simple HTML file, no different than any other page on our site.</p>
        <p id="step-3" data-phone-image="img/phone-lonely-upup-2.png">Our <code>offline.html</code> file contains two link tags which load <code>bootstrap.min.css</code> and <code>offline.css</code>. Let's make sure these are cached and available to our users when they are offline:</p>
<pre><code class="html hljs xml"><span class="comment">&lt;html&gt;</span>
<span class="comment">&lt;head&gt;</span>
  <span class="comment">&lt;meta charset="UTF-8"&gt;</span>
  <span class="comment">&lt;title&gt;Lonely Globe Advisor&lt;/title&gt;</span>
<span class="comment">&lt;/head&gt;</span>
<span class="comment">&lt;body&gt;</span>
  <span class="comment">&lt;h1&gt;Top Hotels in Rome&lt;/h1&gt;</span>
  <span class="comment">&lt;ol&gt;</span>
    <span class="comment">&lt;li&gt;Villa Domus - Via Piacenza 9, Rome, Italy&lt;/li&gt;</span>
    <span class="comment">&lt;li&gt;Hotel Trivelli - Piazza Barberini 11, Rome, Italy&lt;/li&gt;</span>
  <span class="comment">&lt;/<span class="comment">ol</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/upup.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="bash">
    UpUp.start({
      <span class="hljs-string">'content-url'</span>: <span class="hljs-string">'offline.html'</span>,
      <span class="hljs-string">'assets'</span>: [<span class="hljs-string">'css/bootstrap.min.css'</span>, <span class="hljs-string">'css/offline.css'</span>]
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="comment">&lt;/body&gt;</span>
<span class="comment">&lt;/html&gt;</span></code></pre>

        <div class="callout callout-2">
          <h4>Where Should I Place My Files?</h4>
          <p>For security reasons, the browser only lets UpUp's ServiceWorker see network requests within its scope.</p>
          <p>The scope that the ServiceWorker can affect is determined by where you placed <code>upup.min.js</code> and <code>upup.sw.min.js</code>. For example, if you place it on <code>https://yoursite.com/js/upup.sw.min.js</code>, UpUp will only be able to show your offline content when users try to look at the <code>/js/</code> directory.</p>
          <p>This is why it is important to place both files on the same server as your content, and not in a subdirectory. This should idealy be in the root of your site (e.g. https://yoursite.com/upup.min.js).</p>
        </div>

        <h3>Getting fancy</h3>
        <p id="step-4" data-phone-image="img/phone-calendar-upup.png">With just one command and two settings, we can create rich offline experiences for our users. These can be as simple as the examples above, or as robust as a full single page application using frameworks like AngularJS, with customized content for each user, videos and even files the user can access while offline.</p>
<pre><code class="hljs xml"><span class="html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"</span></span><strong><span class="hljs-tag"><span class="hljs-value">/upup.min.js</span></span></strong><span class="hljs-tag"><span class="hljs-value">"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span></span><span class="cs">
  UpUp.start({
    <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">content-url</span></span></strong><span class="cs"><span class="hljs-string">'</span>: <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">schedule.html?user=jane007</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs"><span class="comment">// show this when the user is offline</span></span></span><span class="cs">
    <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">assets</span></span></strong><span class="cs"><span class="hljs-string">'</span>: [ </span><span class="comment"><span class="cs">               <span class="comment">// define additional assets needed while offline</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">img/logo.png</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs">         <span class="comment">// such as images,</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">css/offline.css</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs">      <span class="comment">// custom stylesheets,</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">schedule.jane007.json</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs"><span class="comment">// personalized data for the current user,</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">js/angular.min.js</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs">    <span class="comment">// javascript libraries and frameworks,</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">mov/intro.mp4</span></span></strong><span class="cs"><span class="hljs-string">'</span>, </span><span class="comment"><span class="cs">        <span class="comment">// videos,</span></span></span><span class="cs">
      <span class="hljs-string">'</span></span><strong><span class="cs"><span class="hljs-string">contacts.pdf</span></span></strong><span class="cs"><span class="hljs-string">'</span> </span><span class="comment"><span class="cs">          <span class="comment">// and more.</span></span></span><span class="cs">
    ]
  });
</span><span class="html"><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></span></code></pre>

        <div class="callout callout-3">
          <h4>HTTPS Only</h4>
          <p>To preserve the user's security and privacy, ServiceWorkers can only detect requests over a secure connection.</p>
          <p>During development you can use UpUp through localhost or file (e.g. both <code>http://localhost/</code> and <code>file:///Users/tal/index.html</code> are ok), but to deploy it to production you'll need to have HTTPS set up on your server.</p>
          <p>This is a requirement for many new web technologies, and SSL certificates go for as little as $5, so don't let that stop you&hellip; progress is coming.</p>
        </div>

        <div class="callout callout-4">
          <h4>Browser Support</h4>
          <p>UpUp plays nicely with all browsers, progressively enhancing browsers that support Service Workers, while leaving users with older browsers unaffected.</p>
          <p>UpUp currently supports Chrome 40+, Opera 27+ and Firefox 41+. If your users are using a different browser, they simply won't notice anything different.</p>
        </div>

        <h3>What's next?</h3>

        <div class="row home-icons-row">
          <div class="col-sm-2 col-sm-offset-1 text-center"><a href="https://github.com/TalAter/UpUp/raw/master/dist/upup.zip"><img src="img/icon-download.png" alt="Download UpUp Files" class="img-responsive center-block" />Download UpUp</a></div>
          <div class="col-sm-2 col-sm-offset-2 text-center"><a href="https://github.com/TalAter/UpUp/blob/master/docs/README.md"><img src="img/icon-docs.png" alt="UpUp Documentation" class="img-responsive center-block" />Explore Docs</a></div>
          <div class="col-sm-2 col-sm-offset-2 text-center"><a href="https://github.com/TalAter/UpUp/"><img src="img/icon-source.png" alt="UpUp Source Code" class="img-responsive center-block" />Browse Source</a></div>
        </div>

        <h2 class="text-center">Please help spread the Offline First message:</h2>

        <div class="row home-icons-row">
          <div class="col-sm-4 text-center">
            <iframe src="https://ghbtns.com/github-btn.html?user=TalAter&repo=UpUp&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
          </div>
          <div class="col-sm-4 text-center">
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="https://www.talater.com/upup/" data-text="Control how users see your siteâ€¦even when theyre flying over the Atlantic or 20k leagues under the sea" data-size="large" data-hashtags="OfflineFirst">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          </div>
          <div class="col-sm-4 text-center">
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4";
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
            <div class="fb-like" data-href="https://www.talater.com/upup/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="phone-demo">
    <img src="img/iphone.png">
    <img class="phone-contents" src="img/phone-dark.png">
  </div>

  <div class="container footer text-center">
    <div class="col-md-9">
      <hr>
      <div class="row">
        <p>&copy; 2015 Tal Ater. All rights reserved. The <a href="https://github.com/TalAter/UpUp">UpUp source code</a> is free to use under the <a href="https://github.com/TalAter/UpUp/blob/master/LICENSE">MIT license</a>.</p>
        <p>Sunset image used with permission from <a href="https://500px.com/ido_greiman">Ido Greiman</a>.</p>
      </div>
    </div>
  </div>
  <!-- This is our simple implementation of UpUp for this site -->
  <script src="upup.min.js"></script>
  <script>
    // Let's turn on debugging messages
    UpUp.debug();

    // Let's start UpUp with some basic settings
    UpUp.start({
      'content-url': 'offline.html',
      'assets': ['css/offline.css', 'css/bootstrap.min.css', 'img/mb-offline.png', 'img/logo.png', 'img/sunset.jpg']
    });
  </script>
</body>
</html>
